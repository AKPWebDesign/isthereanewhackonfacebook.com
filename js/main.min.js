var languages={en:"No."},s=new Storage,answerTemplate,buttonTemplate;$(document).ready(function(){answerTemplate=Handlebars.compile($("#answer-template").html());buttonTemplate=Handlebars.compile($("#lang-dropdown-button-template").html());$.getJSON("lang/all.json",function(a){languages=a;changeLang(s.get("lang-code")||"en_US");prepareLangPanel(a)})});$(".langButton, .langCloseButton").click(function(){$(".languages-panel").toggleClass("onscreen");$(".languages-panel").toggleClass("offscreen")});
function changeLang(a){languages[a]||(console.log("Unsupported language code "+a),a="en_us");$("#answer").html(answerTemplate({answer:languages[a].answer}));$("#langDropdown").html(buttonTemplate({name:languages[a].name}));return a}
function prepareLangPanel(a){var d=$("#lang-dropdown-list-item-template").html(),d=Handlebars.compile(d),e={},b,c=[];for(b in a)a.hasOwnProperty(b)&&(e[a[b].name]=b);for(b in e)c.push(b);c.sort();for(a=0;a<c.length;a++)b=e[c[a]],$(".languages").append(d({lang:b,name:c[a]}));$(".languages li a").click(function(){var a=$(this).data("lang");s.set("lang-code",changeLang(a));$(".languages-panel").toggleClass("onscreen");$(".languages-panel").toggleClass("offscreen")})};
